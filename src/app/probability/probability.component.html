<main class="form">
  <ng-container *ngIf="deckData$ | async; let deckData">
    <div *ngIf="deckData.length; else import">
      <mat-expansion-panel hideToggle>
        <mat-expansion-panel-header>
          <mat-panel-title>
            Decklist
          </mat-panel-title>
          <mat-panel-description>
            {{ deckname }}
          </mat-panel-description>
        </mat-expansion-panel-header>
        <div *ngIf="fullDeckList">
          <h3>main</h3>
          <img *ngFor="let card of fullDeckList.main"
            src="https://storage.googleapis.com/ygoprodeck.com/pics/{{ card }}.jpg" />
          <h3>extra</h3>
          <img *ngFor="let card of fullDeckList.extra"
            src="https://storage.googleapis.com/ygoprodeck.com/pics/{{ card }}.jpg" />
          <h3>side</h3>
          <img *ngFor="let card of fullDeckList.side"
            src="https://storage.googleapis.com/ygoprodeck.com/pics/{{ card }}.jpg" />
        </div>
      </mat-expansion-panel>
      <form [formGroup]="dynamicForm">
        <button mat-button (click)="addCombo()" mat-raised-button mat-primary>Add Combo</button>
        <button class="share-link" mat-button (click)="copyShareLink()" mat-raised-button mat-primary>Copy & Share
          Link</button>
        <h2 *ngIf="fullProbability >= 0">Total probability: {{ fullProbability | percent: "1.2-2" }}</h2>
        <app-combo *ngFor="let form of dynamicForm.controls; let i = index" [deckData]="deckData" [form]="form">
        </app-combo>
      </form>
    </div>
  </ng-container>
</main>
<ng-template #import>
  <div class="header">
    <p class="disclaimer">
      Import a .ydk or input an Omega Deck code to continue
    </p>
    <div class="line">
      <input type="file" accept=".ydk, .ydke, *.txt" name="uploadydk" id="uploadydk" (change)="uploadDeck($event)" class="hide" />
      <label for="uploadydk" class="form-label mat-raised-button mat-primary">
        <mat-icon>cloud_upload</mat-icon> Import .ydk
      </label>
      <button (click)="openDialog()" mat-raised-button mat-primary>
        <mat-icon>code</mat-icon> Import Omega code
      </button>
    </div>
  </div>
</ng-template>
